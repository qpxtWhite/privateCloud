define("app",["jquery","lib/jquery.hashchange","util/hash","util/user","util/cookie","util/ajax","api","util/login","util/work","util/file","util/adaptor","util/upload","util/tool"],function(a){function b(){var a=c(window).height();return a-50-45}var c=a("jquery");a("lib/jquery.hashchange")(c);var d=a("util/hash"),e=a("util/user"),f=a("util/login"),g=a("util/work"),h=a("util/upload");a("util/tool"),c(window).hashchange(function(){var a=d.get();switch(a.type){case"login":e.isLogin()?d.set("work"):f.show();break;case"work":e.isLogin()?(c(".wrapper").show(),c(".userArea span").html(e.username),g.init(a.path)):d.set("login");break;default:d.set("work")}}),c(".jsLogout").on("click",function(){e.logout()}),c(".jsBack").on("click",function(){if(!c(this).hasClass("disable")){var a=d.get().path;a.pop(),d.set("work/"+a.join("/"))}}),c(".upload a").on("click",function(){h.init()}),c("body").on("click",".popup .close",function(){c(this).parents(".popup").remove()}),c(".file-con").height(b()),c(window).on("resize",function(){c(".file-con").height(b())}),c(window).hashchange()});