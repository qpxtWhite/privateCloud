define("util/file",["jquery","underscore","util/adaptor","util/hash","api"],function(a){function b(a){var b="unknow-icon";if("dir"==a.type)b="folder-icon";else{var c=/\.[^\.]+$/.exec(a.name);switch(c&&(c=c[0]),c){case".pdf":b="pdf-icon";break;case".doc":b="word-icon";break;case".xls":b="xls-icon";break;case".zip":b="zip-icon";break;default:b="unknow-icon"}}return b}function c(a){var c=e(j({fileIcon:b(a),fileName:a.name}));return c.on("mouseenter",function(){e(this).addClass("hover")}).on("mouseleave",function(){e(this).removeClass("hover")}).on("click",function(){e(this).siblings().removeClass("click"),e(this).addClass("click"),g.set(a,e(this))}).on("dblclick",function(){"dir"==a.type?h.set("work"+a.path):window.open(i.download+a.path)}),c}function d(){this.init=function(a){k.children("ul").html("");for(var b=0;b<a.length;b++){var c=a[b];if(!c.status){for(;"/"==c.path.substr(0,1)&&"/"==c.path.substr(1,1);)c.path=c.path.substr(1);this.add(c)}}},this.add=function(a){var b=c(a);k.children("ul").append(b)}}var e=a("jquery"),f=a("underscore"),g=a("util/adaptor"),h=a("util/hash"),i=a("api"),j=f.template(e("#file_template").html()),k=e(".file-con");return new d});