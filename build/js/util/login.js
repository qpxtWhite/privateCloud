define("util/login",["jquery","util/user","util/cookie","util/ajax","api","util/hash"],function(a){var b=a("jquery"),c=a("util/user"),d=a("util/hash"),e=function(){var a=b("#login_template").html(),e=b(".wrapper"),f=b(".login-wrapper");this.show=function(){e.hide();var g=b(a);f.html(g);var h=this;g.find(".jsLogin").on("click",function(){var a=g.find("input[type=text]").val(),e=g.find("input[type=password]").val(),f=b(this);f.parent().addClass("loading"),c.login(a,e,function(){h.remove(),d.set("work")},function(){f.parent().removeClass("loading"),g.find(".error-msg").html("密码错误").show()})}),g.find("input[type=password]").on("focus",function(){g.find(".error-msg").hide()})},this.remove=function(){f.html("")}};return new e});